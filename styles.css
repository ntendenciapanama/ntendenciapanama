// --- LÃ“GICA DE LA BOUTIQUE NTENDENCIA ---

let carrito = [];
let productosData = []; // AquÃ­ se cargarÃ¡n tus productos

// 1. FunciÃ³n para abrir/cerrar carrito
function toggleCarrito() {
    const modal = document.getElementById('modal-carrito');
    modal.style.display = (modal.style.display === 'flex') ? 'none' : 'flex';
}

// 2. AÃ±adir al carrito
function aÃ±adirAlCarrito(id, nombre, precio) {
    carrito.push({ id, nombre, precio });
    actualizarInterfazCarrito();
    
    // Feedback visual rÃ¡pido
    const btn = event.target;
    const originalText = btn.innerText;
    btn.innerText = "Â¡AÃ‘ADIDO!";
    btn.style.background = "#d4af37";
    setTimeout(() => {
        btn.innerText = originalText;
        btn.style.background = "var(--primario)";
    }, 1000);
}

// 3. Actualizar nÃºmeros del carrito
function actualizarInterfazCarrito() {
    const lista = document.getElementById('lista-carrito');
    const contador = document.getElementById('contador-carrito');
    const totalSpan = document.getElementById('precio-total');
    
    lista.innerHTML = "";
    let total = 0;

    carrito.forEach((item, index) => {
        total += item.price;
        lista.innerHTML += `
            <div class="item-carrito">
                <div>
                    <strong>${item.nombre}</strong><br>
                    <span>$${item.precio.toFixed(2)}</span>
                </div>
                <button class="btn-quitar" onclick="quitarDelCarrito(${index})">&times;</button>
            </div>
        `;
    });

    contador.innerText = carrito.length;
    totalSpan.innerText = total.toFixed(2);
}

// 4. Quitar del carrito
function quitarDelCarrito(index) {
    carrito.splice(index, 1);
    actualizarInterfazCarrito();
}

// 5. Enviar pedido por WhatsApp
function enviarPedidoWhatsApp() {
    if (carrito.length === 0) {
        alert("Tu lista estÃ¡ vacÃ­a");
        return;
    }

    let mensaje = "Â¡Hola NTENDENCIA! ðŸ‘‹ Quisiera consultar disponibilidad de:\n\n";
    carrito.forEach(item => {
        mensaje += `â€¢ ${item.nombre} - $${item.precio}\n`;
    });
    
    const total = document.getElementById('precio-total').innerText;
    mensaje += `\nTotal estimado: $${total}\n\nÂ¿Tienen disponible para entrega?`;
    
    const url = `https://wa.me/50767710645?text=${encodeURIComponent(mensaje)}`;
    window.open(url, '_blank');
}

// 6. Buscador en tiempo real
document.getElementById('buscador').addEventListener('input', (e) => {
    const termino = e.target.value.toLowerCase();
    const productos = document.querySelectorAll('.producto');

    productos.forEach(prod => {
        const nombre = prod.querySelector('h3').innerText.toLowerCase();
        if (nombre.includes(termino)) {
            prod.style.display = "flex";
        } else {
            prod.style.display = "none";
        }
    });
});